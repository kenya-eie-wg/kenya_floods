) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori")
floods
floods %>% filter(is.na(adm2_pcode))
locations_match %>% filter(adm1_en == "Wajir")
pcode2_shape %>%
filter(adm1_en == "Wajir") %>%
ggplot() +
geom_sf() +
geom_sf_text(aes(label = adm2_en))
pcode2_shape %>%
filter(adm1_en == "Wajir") %>%
ggplot() +
geom_sf() +
geom_sf_text(aes(label = adm2_pcode))
locations %>% filter(adm1_en == "Wajir")
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = ifelse(sub_county == "Wajir West", "KE008036"))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = ifelse(sub_county == "Wajir West", "KE008036", adm2_pcode))
floods %>% filter(is.na(adm2_pcode))
locations %>% filter(adm1_en == "Wajir")
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = ifelse(sub_county == "Wajir West", "KE008036", adm2_pcode))
floods %>% filter(is.na(adm2_pcode))
locations %>% filter(adm1_en == "Busi")
locations %>% filter(adm1_en == "Busia")
floods %>% filter(is.na(adm2_pcode))
locations %>% filter(adm1_en == "Busia")
pcode2_shape %>%
filter(adm1_en == "Busia") %>%
ggplot() +
geom_sf() +
geom_sf_text(aes(label = adm2_pcode))
pcode2_shape %>%
filter(adm1_en == "Busia") %>%
ggplot() +
geom_sf() +
geom_sf_text(aes(label = adm2_en))
locations %>% filter(adm1_en == "Busia")
floods %>% filter(is.na(adm2_pcode))
locations %>% filter(adm1_en == "Busia")
floods %>% filter(is.na(adm2_pcode))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people))
floods %>% filter(is.na(adm2_pcode))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people))
floods %>% filter(is.na(adm2_pcode))
floods %>% glimpse()
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people)) %>%
select(-x34:x39)
floods %>% glimpse()
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people)) %>%
select(-matches("x"))
floods %>% glimpse()
read_sheet("https://docs.google.com/spreadsheets/d/12BclJkUegDVWxx131EvnDCFHXw3ZGZFD/edit#gid=1495683341")
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people)) %>%
select(-matches("x")) %>%
mutate(assessment_date = as.Date(assessment_date, origin = "1899-12-30"))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people)) %>%
select(-matches("x")) %>%
mutate(assessment_date = round(assessment_date, digits = 0),
assessment_date = as.Date(assessment_date, origin = "1899-12-30"))
floods <- read_excel("./data/Kenya El Nino Flood impacts & Response data - 05Dec2023.xlsx",
sheet = 1,
skip = 2) %>%
clean_names() %>%
left_join(locations_match %>%
distinct(adm1_en, adm1_pcode),
by = c("county" = "adm1_en")) %>%
mutate(sub_county = case_when(sub_county == "Loiyangalani" ~ "Loyangalani",
sub_county == "Mutitu" ~ "Kitui East",
ward %in% c("Waberi", "Galbet", "Iftin") ~ "Garissa Township",
county == "Garissa" & ward == "Townhip" ~ "Garissa Township",
sub_county == "Garissa" ~ "Garissa Township",
sub_county == "Liboi" ~ "Dadaab",
ward == "Sankuri" ~ "Balambala",
sub_county == "Mwingi Central" ~ "Mwingi North",
sub_county %in% c("Bothai", "Bura east") ~ "Ijara",
sub_county == "Kitui rural" ~ "Kitui Rural",
TRUE ~ sub_county)) %>%
mutate(id =
paste0(county, sub_county, ward, village_location_town, name_of_site, number_of_affected_households)) %>%
left_join(
locations_match %>%
select(adm1_pcode,
adm2_en,
adm2_pcode),
by = c("adm1_pcode" = "adm1_pcode",
"sub_county" = "adm2_en")
) %>%
mutate(total_no_of_affected_people = ifelse(is.na(total_no_of_affected_people) &
!is.na(total_no_of_displaced_people),
total_no_of_displaced_people,
total_no_of_affected_people),
number_of_affected_households = ifelse(is.na(number_of_affected_households) &
!is.na(number_of_displaced_households),
number_of_displaced_households,
number_of_affected_households)) %>%
filter(county != "Migori") %>%
mutate(adm2_pcode = case_when(sub_county == "Wajir West" ~ "KE008036",
sub_county == "Samia" ~ "KE040230",
sub_county == "Bunyala" ~ "KE040231",
TRUE ~ adm2_pcode)) %>%
filter(!is.na(total_no_of_affected_people) | !is.na(total_no_of_displaced_people)) %>%
select(-matches("x")) %>%
mutate(assessment_date = round(as.numeric(assessment_date), digits = 0),
assessment_date = as.Date(assessment_date, origin = "1899-12-30"))
floods %>% glimpse()
